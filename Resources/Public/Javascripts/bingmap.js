define(["bingmap","async!https://www.bing.com/api/maps/mapcontrol?branch=experimental"],function(){"use strict";var e={location:window.location,BingMap:{hiddenclassname:"staddressmap__hiddenlistitem",distancewrapper:".staddressmap__distance",distanceWrapperShowClassname:"staddressmap__distance--show",radiuscolor:"#FF0000",radiusopacity:.35,radiusstrokeweight:0,map:null,circle:null,marker:null,markers:[],infowindow:null,items:document.querySelectorAll("[data-mapmarkeritem]"),markercontent:document.querySelectorAll("[data-mapmarkercontent]"),element:document.querySelectorAll(".staddressmap__map")[0],searchfrompoint:document.querySelectorAll(".staddressmap__searchfrompoint")[0],searchradius:document.querySelectorAll(".staddressmap__searchradius")[0],searchsubmit:document.querySelectorAll(".staddressmap__searchsubmit")[0],searchreset:document.querySelectorAll(".staddressmap__searchreset")[0],init:function(){console.log("teste"),e.BingMap.map=new Microsoft.Maps.Map(e.BingMap.element,{credentials:"AoaPK47y-Kxe6t_cmrtFWDQzCjOGaJMofONHzpy3WCkf9RXaQuATQSv99rYjwxu0"}),e.BingMap.createMarkers()},initializeGoogleMaps:function(){e.GoogleMaps.map=new google.maps.Map(e.GoogleMaps.element),e.GoogleMaps.infowindow=new google.maps.InfoWindow({size:new google.maps.Size(150,50)}),e.GoogleMaps.createMarkers()},createMarkers:function(){for(var a=0;a<e.BingMap.items.length;a++)e.BingMap.items[a].classList.remove(e.BingMap.hiddenclassname);e.BingMap.items.forEach(function(a,o){var s=a.getAttribute("data-staddressmap-latitude"),r=a.getAttribute("data-staddressmap-longitude");a.getAttribute("data-staddressmap-markertitle"),e.BingMap.markercontent[o];e.BingMap.markers.push(new Microsoft.Maps.Location(s,r)),o++}),console.log(e.BingMap.markers),console.log(Microsoft.Maps.TestDataGenerator.getPushpins(10,e.BingMap.map.getBounds())),e.BingMap.createMarker(e.BingMap.markers)},createMarker:function(a){var o=new Microsoft.Maps.Layer;o.add(e.BingMap.markers),e.BingMap.map.layers.insert(o)},setMapOnAll:function(a){for(var o=0;o<e.GoogleMaps.markers.length;o++)e.GoogleMaps.markers[o].setMap(a)},clearMarkers:function(){e.GoogleMaps.setMapOnAll(null)},createRadius:function(){var a=e.GoogleMaps.searchfrompoint.value,o=1e3*parseInt(e.GoogleMaps.searchradius.value,10);e.GoogleMaps.clearMarkers(null);var s=new google.maps.Geocoder,r=new google.maps.LatLngBounds;s.geocode({address:a},function(a,s){if(s===google.maps.GeocoderStatus.OK){e.GoogleMaps.map.setCenter(a[0].geometry.location),e.GoogleMaps.circle&&e.GoogleMaps.circle.setMap(null),e.GoogleMaps.circle=new google.maps.Circle({center:a[0].geometry.location,radius:o,fillOpacity:e.GoogleMaps.radiusopacity,fillColor:e.GoogleMaps.radiuscolor,strokeWeight:e.GoogleMaps.radiusstrokeweight,map:e.GoogleMaps.map}),e.GoogleMaps.map.fitBounds(e.GoogleMaps.circle.getBounds());for(var t=new google.maps.Marker({map:e.GoogleMaps.map,position:a[0].geometry.location,visible:!1}),n=0;n<e.GoogleMaps.markers.length;n++){var l=e.GoogleMaps.markers[n],i=google.maps.geometry.spherical.computeDistanceBetween(l.getPosition(),t.getPosition()),p=e.GoogleMaps.items[n].querySelectorAll(e.GoogleMaps.distancewrapper)[0];i<o?(r.extend(l.getPosition()),l.setMap(e.GoogleMaps.map),console.log(r),e.GoogleMaps.items[n].classList.remove(e.GoogleMaps.hiddenclassname),p.innerHTML=Math.round(i/1e3*100)/100+" km",p.classList.add(e.GoogleMaps.distanceWrapperShowClassname)):(l.setMap(null),e.GoogleMaps.items[n].classList.add(e.GoogleMaps.hiddenclassname),p.classList.remove(e.GoogleMaps.distanceWrapperShowClassname))}}else alert("Geocode was not successful for the following reason: "+s)})}}};e.BingMap.init()});